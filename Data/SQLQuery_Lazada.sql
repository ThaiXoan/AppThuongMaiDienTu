CREATE DATABASE DBLAZADA;


CREATE TABLE LOAISANPHAM
(
	MALOAISANPHAM INT IDENTITY(1,1),
    TENLOAISANPHAM NVARCHAR(200),
    MALOAI_CHA INT,
 	
    CONSTRAINT KHOACHINH_LOAISANPHAM_MALOAISANPHAM PRIMARY KEY (MALOAISANPHAM)
);

CREATE TABLE THUONGHIEU
(
	MATHUONGHIEU INT IDENTITY(1,1),
    TENTHUONGHIEU NVARCHAR(200),
    HINHTHUONGHIEU TEXT,
    
    CONSTRAINT KHOACHINH_THUONGHIEU_MATHUONGHIEU PRIMARY KEY (MATHUONGHIEU)
);

CREATE TABLE SANPHAM
(
    MASANPHAM INT IDENTITY(1,1),
    TENSANPHAM  NVARCHAR(200),
    GIA DECIMAL,
    ANHLON TEXT,
    ANHNHO TEXT,
    THONGTIN TEXT,
    SOLUONG INT,
    MALOAISANPHAM INT,
    MATHUONGHIEU INT,
    
    CONSTRAINT KHOACHINH_SANPHAM_MASANPHAM PRIMARY KEY (MASANPHAM),
    CONSTRAINT KHOANGOAI_SANPHAM_MALOAISANPHAM FOREIGN KEY (MALOAISANPHAM) REFERENCES LOAISANPHAM (MALOAISANPHAM),
  	CONSTRAINT KHOANGOAI_SANPHAM_MATHUONGHIEU FOREIGN KEY (MATHUONGHIEU) REFERENCES THUONGHIEU (MATHUONGHIEU)
);

CREATE TABLE LOAINHANVIEN(
	MALOAINHANVIEN INT IDENTITY(1,1),
    TENLOAINHANVIEN NVARCHAR(20),
    
    CONSTRAINT KHOACHINH_LOAINHANVIEN_MALOAINHANVIEN PRIMARY KEY (MALOAINHANVIEN)
);

CREATE TABLE NHANVIEN(
	MANHANVIEN INT IDENTITY(1,1),
    TENNHANVIEN NVARCHAR(100),
    TENDANGNHAP VARCHAR(100),
    MATKHAU VARCHAR(100),
    DIACHI TEXT,
    NGAYSINH VARCHAR(10),
    SODIENTHOAI VARCHAR(20),
    GIOITINH BIT,
    MALOAINHANVIEN INT,
    
    CONSTRAINT KHOACHINH_NHANVIEN_MANHAVIEN PRIMARY KEY (MANHANVIEN),
    CONSTRAINT KHOANGOAI_NHANVIEN_MALOAINHANVIEN FOREIGN KEY (MALOAINHANVIEN) REFERENCES LOAINHANVIEN (MALOAINHANVIEN)
);

CREATE TABLE DONDATHANG
(
    MADONHANG INT IDENTITY(1,1),
    MANHAVIEN INT,
    TRANGTHAI BIT,
    DIACHIGIAOHANG TEXT,
    NGAYDAT VARCHAR(10),
    NGAYGIAO VARCHAR(10),
   	MOTA TEXT,
    
    CONSTRAINT KHOACHINH_DONDATHANG_MADONHANG PRIMARY KEY (MADONHANG)
);

CREATE TABLE CHITIETDATHANG
(
	MADONHANG	INT,
    MASANPHAM	INT,
    SOLUONG	INT,
    
    CONSTRAINT KHOACHINH_CHITIETDATHANG_MADONHANG_MASANPHAM PRIMARY KEY (MADONHANG,MASANPHAM),
    CONSTRAINT KHOANGOAI_CHITIETDATHANG_MADONHHANG FOREIGN KEY (MADONHANG) REFERENCES DONDATHANG(MADONHANG),
    CONSTRAINT KHOANGOAI_CHITIETDATHANG_MASANPHAM FOREIGN KEY (MASANPHAM) REFERENCES SANPHAM(MASANPHAM)
 );
 
 CREATE TABLE LOAIKHUYENMAI(
	MALOAIKHUYENMAI	INT IDENTITY(1,1),
    TENLOAIKHUYENMAI VARCHAR(200),
    
    CONSTRAINT KHOACHINH_LOAIKHUYENMAI_MALOAIKHUYENMAI PRIMARY KEY (MALOAIKHUYENMAI)
);

CREATE TABLE CHITIETKHUYENMAI(
	MALOAIKHUYENMAI INT,
    MASANPHAM INT,
    NGAYBATDAUKHUYENMAI VARCHAR(10),
    NGAYKETTHUCKHUYENMAI VARCHAR(10),
    PHANTRAMKHUYENMAI VARCHAR(2),
    
	CONSTRAINT KHOACHINH_CHITIETKHUYENMAI_MALOAIKHUYENMAI_MASANPHAM PRIMARY KEY (MALOAIKHUYENMAI,MASANPHAM),
    CONSTRAINT KHOANGOAI_CHITIETKHUYENMAI_MALOAIKHUYENMAI FOREIGN KEY (MALOAIKHUYENMAI) REFERENCES LOAIKHUYENMAI (MALOAIKHUYENMAI),
	CONSTRAINT KHOANGOAI_CHITIETKHUYENMAI_MASANPHAM FOREIGN KEY (MASANPHAM) REFERENCES SANPHAM (MASANPHAM)    
);

CREATE TABLE BINHLUAN
(
    MABINHLUAN INT IDENTITY(1,1),
    MANHANVIEN InT,
    MASANPHAM INT,
    NOIDUNG TEXT,
    NGAYBINHLUAN VARCHAR(10),
    
    CONSTRAINT KHOACHINH_BINHLUAN_MABINHLUAN PRIMARY KEY (MABINHLUAN),
    CONSTRAINT KHOANGOAI_BINHLUAN_MANHANVIEN FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN (MANHANVIEN),
    CONSTRAINT KHOANGOAI_BINHLUAN_MASANPHAM FOREIGN KEY (MASANPHAM) REFERENCES SANPHAM (MASANPHAM)
);

CREATE TABLE DANHGIA
(
	MASANPHAM INT,
    MANHANVIEN INT,
    NOIDUNG TEXT,
    SOSAO VARCHAR(1),
    
    CONSTRAINT KHOACHINH_DANHGIA_MASANPHAM_MANHANVIEN PRIMARY KEY (MASANPHAM,MANHANVIEN),
    CONSTRAINT KHOANGOAI_DANHGIA_MASANPHAM FOREIGN KEY (MASANPHAM) REFERENCES SANPHAM(MASANPHAM),
    CONSTRAINT KHOANGOAI_DANHGIA_MANHANVIRN FOREIGN KEY (MANHANVIEN) REFERENCES NHANVIEN(MANHANVIEN)
);

CREATE TABLE SANPHAMMONGMUON
(
	MASANPHAM INT,
    MANHANVIEN INT,
    
    CONSTRAINT KHOACHINH_SANPHAMMONGMUON_MASANPHAM_MANHANVIEN PRIMARY KEY (MASANPHAM,MANHANVIEN)
);
